"use strict";exports.__esModule=true;function margv(argv){argv=Array.isArray(argv)&&argv.length?argv:process.argv;var paramsToString=function(v){return v.replace(/([^,\[\]():{}]+)/g,'"$1"')};var parseValue=function(v){if(/^\+\d+/.test(v)){return Number(v)}if(/^{(.+)}$/.test(v)){return parseValueRecurcive(eval("("+paramsToString(v)+")"))}if(/^\[(.+)]$/.test(v)){return parseValueRecurcive(eval("("+paramsToString(v)+")"))}if(v==="undefined"){return undefined}if(v==="null"){return null}if(v==="NaN"){return NaN}if(v==="Infinity"){return Infinity}if(/^Set\(\[(.+)]\)$/.test(v)){v=v.replace(/^Set/,"");return parseValueRecurcive(eval("(new Set"+paramsToString(v)+")"))}if(/^Map\(\[(.+)]\)$/.test(v)){v=v.replace(/^Map/,"");return parseValueRecurcive(eval("(new Map"+paramsToString(v)+")"))}return v};var parseValueRecurcive=function(value){if(!value){return parseValue(value)}if(Array.isArray(value)||typeof value==="object"){Object.keys(value).map((function(key){return value[key]=parseValueRecurcive(value[key])}));return value}return parseValue(value)};var changing=function(deep,value,obj){return deep.split(".").reduce((function(ac,v,i,array){if(i===array.length-1){if(ac[v]){if(Array.isArray(ac[v])){ac[v].push(value)}else{ac[v]=[ac[v],value]}}else{ac[v]=value}}else if(!ac.hasOwnProperty(v)){ac[v]={}}return ac[v]}),obj)};var setValue=function(ac,k,v){var value=parseValue(v);if(ac.args.hasOwnProperty(k)){if(Array.isArray(ac.args[k])){ac.args[k].push(value)}else{ac.args[k]=[ac.args[k],value]}}else{if(/\./.test(k)){changing(k,value,ac.args)}else{ac.args[k]=value}}};var result={$:argv,$0:argv[1],_:[]};var addition=argv.slice(2);var stop=addition.indexOf("--");if(stop!==-1){result["_"]=addition.slice(stop+1);addition=addition.slice(0,stop)}addition.push("-$");var args=addition.reduce((function(ac,v,i,array){ac.value=v.replace(/^-{1,2}(no-)?/,"");if(ac.prevType===1&&ac.value===v){ac.type=2}else{ac.type=ac.value===v?2:1}if(typeof ac.prev==="string"&&ac.prev.indexOf("=")!==-1){var _a=ac.prev.split("="),key=_a[0],value=_a[1];setValue(ac,key,value);ac.used=false}else{if(ac.type===ac.prevType||!ac.used&&ac.prevType===2&&i===1||!ac.used&&ac.prevType===2&&i===array.length-1){ac.args[ac.prev]=ac["default"];ac.used=false}else if(ac.prevType===1&&ac.type===2){setValue(ac,ac.prev,v);ac.value=parseValue(v);ac.used=true}else{ac.used=false}}ac["default"]=!/^-{1,2}no-/.test(v);ac.prev=ac.value;ac.prevType=ac.type;return ac}),{args:{},value:"",type:0,prev:"",prevType:0,default:true,used:true}).args;return Object.assign(result,args)}exports["default"]=margv;module.exports=margv;